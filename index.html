<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium Calc Vault</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --dark-1: #0a0a0f;
            --dark-2: #121218;
            --dark-3: #1a1a24;
            --accent-blue: #00a8ff;
            --accent-cyan: #00ffea;
            --accent-purple: #9c27b0;
            --danger-red: #ff4757;
            --success-green: #00d2a8;
            --text-primary: #ffffff;
            --text-secondary: #b0b0c0;
            --glass-bg: rgba(30, 30, 40, 0.7);
            --glass-border: rgba(100, 100, 150, 0.2);
            --shadow-glow: 0 0 20px rgba(0, 168, 255, 0.3);
            --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(145deg, var(--dark-1), var(--dark-2));
            color: var(--text-primary);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* App Container */
        .app-container {
            width: 100%;
            max-width: 500px;
            height: 100vh;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            background: linear-gradient(145deg, var(--dark-1), var(--dark-2));
            box-shadow: var(--shadow-soft);
        }
        
        /* Screen Container */
        .screen-container {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* PIN Setup Screen */
        .pin-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #0c0c14, #1a1a28);
            z-index: 100;
        }
        
        .pin-screen.hidden {
            transform: translateY(-100%);
        }
        
        .app-logo {
            margin-bottom: 40px;
            text-align: center;
        }
        
        .app-logo h1 {
            font-size: 2.2rem;
            background: linear-gradient(to right, var(--accent-cyan), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }
        
        .app-logo p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .pin-display {
            margin: 30px 0 40px;
            display: flex;
            gap: 20px;
        }
        
        .pin-dot {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--dark-3);
            border: 2px solid var(--glass-border);
            transition: all 0.2s;
        }
        
        .pin-dot.filled {
            background: var(--accent-blue);
            border-color: var(--accent-cyan);
            box-shadow: 0 0 10px var(--accent-blue);
        }
        
        .pin-instruction {
            color: var(--text-secondary);
            margin-bottom: 30px;
            text-align: center;
            font-size: 0.95rem;
        }
        
        /* Calculator Screen */
        .calculator-screen {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .calculator-screen.hidden {
            transform: translateY(100%);
        }
        
        /* Status Bar (Initially Hidden) */
        .status-bar {
            height: 28px;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .status-bar.visible {
            display: flex;
        }
        
        .time-display {
            font-weight: 500;
        }
        
        .status-icons i {
            margin-left: 12px;
        }
        
        /* Calculator Display */
        .calc-display {
            flex: 1;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: flex-end;
            overflow: hidden;
            background: rgba(10, 10, 15, 0.7);
        }
        
        .calc-history {
            color: var(--text-secondary);
            font-size: 1.2rem;
            min-height: 24px;
            margin-bottom: 10px;
            text-align: right;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        
        .calc-result {
            font-size: 3.5rem;
            font-weight: 300;
            text-align: right;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }
        
        /* Calculator Keypad */
        .calc-keypad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            padding: 20px;
            background: rgba(18, 18, 24, 0.8);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .calc-btn {
            aspect-ratio: 1;
            border-radius: 50%;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 500;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.15s;
            user-select: none;
            position: relative;
            overflow: hidden;
            background: var(--dark-3);
            box-shadow: var(--shadow-soft);
        }
        
        .calc-btn:active {
            transform: scale(0.92);
        }
        
        .calc-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .calc-btn:active::after {
            animation: ripple 0.6s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .num-btn {
            background: rgba(40, 40, 50, 0.7);
        }
        
        .operator-btn {
            background: linear-gradient(135deg, var(--accent-blue), #0088cc);
            color: white;
            font-weight: 600;
        }
        
        .equals-btn {
            background: linear-gradient(135deg, var(--accent-purple), #7b1fa2);
            color: white;
            font-weight: 600;
            box-shadow: var(--shadow-glow);
        }
        
        .clear-btn {
            background: linear-gradient(135deg, var(--danger-red), #c2185b);
            color: white;
        }
        
        .zero-btn {
            grid-column: span 2;
            aspect-ratio: 2 / 1;
            border-radius: 50px;
        }
        
        /* Vault Screen */
        .vault-screen {
            display: none;
            flex-direction: column;
            height: 100%;
            background: var(--dark-2);
        }
        
        .vault-screen.active {
            display: flex;
            animation: vaultReveal 0.5s ease-out;
        }
        
        @keyframes vaultReveal {
            0% { opacity: 0; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .vault-header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            text-align: center;
        }
        
        .vault-header h2 {
            font-size: 1.5rem;
            background: linear-gradient(to right, var(--accent-cyan), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }
        
        .vault-content {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        .tab-content {
            position: absolute;
            width: 100%;
            height: 100%;
            padding: 20px;
            overflow-y: auto;
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Gallery Tab */
        .media-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .action-btn {
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: var(--shadow-soft);
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        .action-btn.danger {
            background: linear-gradient(135deg, var(--danger-red), #c2185b);
        }
        
        .media-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .media-item {
            aspect-ratio: 1;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            background: var(--dark-3);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .media-item:active {
            transform: scale(0.95);
        }
        
        .media-item.selected {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 234, 0.5);
        }
        
        .media-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .media-icon {
            font-size: 2rem;
            color: var(--text-secondary);
        }
        
        .media-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px;
            font-size: 0.7rem;
            text-align: center;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        
        /* Fullscreen Media Viewer */
        .media-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .media-viewer.active {
            display: flex;
            animation: fadeIn 0.3s;
        }
        
        .viewer-content {
            max-width: 100%;
            max-height: 80%;
            margin-bottom: 20px;
        }
        
        .viewer-media {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }
        
        .viewer-controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .viewer-btn {
            padding: 12px 25px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .viewer-btn:active {
            transform: scale(0.95);
        }
        
        /* Browser Tab */
        .browser-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .url-input {
            flex: 1;
            padding: 15px;
            background: var(--dark-3);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
        
        .browser-frame {
            width: 100%;
            height: calc(100% - 80px);
            border: none;
            border-radius: 10px;
            background: white;
            overflow: hidden;
        }
        
        /* YouTube Tab */
        .youtube-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .youtube-search {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .youtube-player {
            flex: 1;
            min-height: 300px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .youtube-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Games Tab */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .game-card {
            aspect-ratio: 1;
            background: var(--dark-3);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .game-card:active {
            transform: scale(0.95);
            border-color: var(--accent-cyan);
        }
        
        .game-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--accent-blue);
        }
        
        .game-title {
            font-size: 1rem;
            font-weight: 500;
        }
        
        .game-frame {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-1);
            z-index: 1001;
            display: none;
            flex-direction: column;
        }
        
        .game-frame.active {
            display: flex;
        }
        
        .game-header {
            padding: 15px;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .game-iframe {
            flex: 1;
            width: 100%;
            border: none;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(20, 20, 30, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            display: none;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
        }
        
        .bottom-nav.visible {
            display: flex;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            padding: 8px 12px;
            border-radius: 10px;
            min-width: 60px;
        }
        
        .nav-item:active {
            transform: scale(0.9);
        }
        
        .nav-item.active {
            color: var(--accent-cyan);
            background: rgba(0, 255, 234, 0.1);
        }
        
        .nav-icon {
            font-size: 1.2rem;
        }
        
        .nav-label {
            font-size: 0.7rem;
            font-weight: 500;
        }
        
        /* Utility Classes */
        .hidden {
            display: none !important;
        }
        
        .visible {
            display: flex !important;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 3px;
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-cyan);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 400px) {
            .calc-result {
                font-size: 2.8rem;
            }
            
            .calc-btn {
                font-size: 1.3rem;
            }
            
            .media-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- PIN Setup Screen -->
        <div class="screen-container pin-screen" id="pinScreen">
            <div class="app-logo">
                <h1>CALC VAULT</h1>
                <p>Premium Security & Privacy</p>
            </div>
            
            <div class="pin-display" id="pinDisplay">
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
            </div>
            
            <p class="pin-instruction" id="pinInstruction">Set your 4-digit vault PIN</p>
            
            <div class="calc-keypad">
                <button class="calc-btn num-btn" data-number="1">1</button>
                <button class="calc-btn num-btn" data-number="2">2</button>
                <button class="calc-btn num-btn" data-number="3">3</button>
                <button class="calc-btn operator-btn">÷</button>
                
                <button class="calc-btn num-btn" data-number="4">4</button>
                <button class="calc-btn num-btn" data-number="5">5</button>
                <button class="calc-btn num-btn" data-number="6">6</button>
                <button class="calc-btn operator-btn">×</button>
                
                <button class="calc-btn num-btn" data-number="7">7</button>
                <button class="calc-btn num-btn" data-number="8">8</button>
                <button class="calc-btn num-btn" data-number="9">9</button>
                <button class="calc-btn operator-btn">-</button>
                
                <button class="calc-btn clear-btn">C</button>
                <button class="calc-btn num-btn" data-number="0">0</button>
                <button class="calc-btn operator-btn">.</button>
                <button class="calc-btn operator-btn">+</button>
                
                <button class="calc-btn operator-btn">%</button>
                <button class="calc-btn operator-btn">+/-</button>
                <button class="calc-btn equals-btn" id="pinEnterBtn" style="grid-column: span 2;">=</button>
            </div>
        </div>
        
        <!-- Calculator Screen -->
        <div class="screen-container calculator-screen" id="calculatorScreen">
            <div class="status-bar" id="statusBar">
                <div class="time-display" id="currentTime">12:00 PM</div>
                <div class="status-icons">
                    <i class="fas fa-signal"></i>
                    <i class="fas fa-wifi"></i>
                    <i class="fas fa-battery-full"></i>
                </div>
            </div>
            
            <div class="calc-display">
                <div class="calc-history" id="calcHistory"></div>
                <div class="calc-result" id="calcResult">0</div>
            </div>
            
            <div class="calc-keypad">
                <button class="calc-btn operator-btn" data-operator="C">C</button>
                <button class="calc-btn operator-btn" data-operator="+/-">+/-</button>
                <button class="calc-btn operator-btn" data-operator="%">%</button>
                <button class="calc-btn operator-btn" data-operator="÷">÷</button>
                
                <button class="calc-btn num-btn" data-number="7">7</button>
                <button class="calc-btn num-btn" data-number="8">8</button>
                <button class="calc-btn num-btn" data-number="9">9</button>
                <button class="calc-btn operator-btn" data-operator="×">×</button>
                
                <button class="calc-btn num-btn" data-number="4">4</button>
                <button class="calc-btn num-btn" data-number="5">5</button>
                <button class="calc-btn num-btn" data-number="6">6</button>
                <button class="calc-btn operator-btn" data-operator="-">-</button>
                
                <button class="calc-btn num-btn" data-number="1">1</button>
                <button class="calc-btn num-btn" data-number="2">2</button>
                <button class="calc-btn num-btn" data-number="3">3</button>
                <button class="calc-btn operator-btn" data-operator="+">+</button>
                
                <button class="calc-btn operator-btn zero-btn" data-number="0">0</button>
                <button class="calc-btn operator-btn" data-operator=".">.</button>
                <button class="calc-btn equals-btn" data-operator="=" id="vaultUnlockBtn">=</button>
            </div>
        </div>
        
        <!-- Vault Screen -->
        <div class="vault-screen" id="vaultScreen">
            <div class="vault-header">
                <h2 id="vaultTitle">Private Gallery</h2>
            </div>
            
            <div class="vault-content">
                <!-- Home Tab -->
                <div class="tab-content active" id="homeTab">
                    <div class="app-logo" style="margin-top: 40px;">
                        <h1>VAULT UNLOCKED</h1>
                        <p>Your private space is secure</p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px; padding: 0 20px;">
                        <div style="font-size: 5rem; color: var(--accent-cyan); margin-bottom: 20px;">
                            <i class="fas fa-lock-open"></i>
                        </div>
                        <h3 style="margin-bottom: 15px; color: var(--accent-blue);">Premium Vault Active</h3>
                        <p style="color: var(--text-secondary); line-height: 1.5;">
                            All your private photos, videos, and browsing are protected behind the calculator facade.
                            Access your files using the bottom navigation.
                        </p>
                        
                        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 40px;">
                            <div style="background: var(--dark-3); padding: 20px; border-radius: 15px; min-width: 140px; text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent-blue); margin-bottom: 10px;">
                                    <i class="fas fa-images"></i>
                                </div>
                                <div style="font-size: 1.8rem; font-weight: 600;" id="photoCount">0</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Photos</div>
                            </div>
                            
                            <div style="background: var(--dark-3); padding: 20px; border-radius: 15px; min-width: 140px; text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent-purple); margin-bottom: 10px;">
                                    <i class="fas fa-video"></i>
                                </div>
                                <div style="font-size: 1.8rem; font-weight: 600;" id="videoCount">0</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Videos</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gallery Tab -->
                <div class="tab-content" id="galleryTab">
                    <div class="media-controls">
                        <button class="action-btn" id="addPhotoBtn">
                            <i class="fas fa-plus"></i> Add Photos
                        </button>
                        <button class="action-btn" id="viewPhotoBtn" disabled>
                            <i class="fas fa-eye"></i> View
                        </button>
                        <button class="action-btn danger" id="deletePhotoBtn" disabled>
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                    
                    <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
                    
                    <div class="media-grid" id="photoGrid">
                        <!-- Photos will be added here -->
                        <div class="media-item empty-state">
                            <i class="fas fa-images media-icon"></i>
                            <div class="media-overlay">No photos yet</div>
                        </div>
                    </div>
                </div>
                
                <!-- Video Tab -->
                <div class="tab-content" id="videoTab">
                    <div class="media-controls">
                        <button class="action-btn" id="addVideoBtn">
                            <i class="fas fa-plus"></i> Add Videos
                        </button>
                        <button class="action-btn" id="playVideoBtn" disabled>
                            <i class="fas fa-play"></i> Play
                        </button>
                        <button class="action-btn danger" id="deleteVideoBtn" disabled>
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                    
                    <input type="file" id="videoInput" accept="video/*" multiple style="display: none;">
                    
                    <div class="media-grid" id="videoGrid">
                        <!-- Videos will be added here -->
                        <div class="media-item empty-state">
                            <i class="fas fa-video media-icon"></i>
                            <div class="media-overlay">No videos yet</div>
                        </div>
                    </div>
                </div>
                
                <!-- Browser Tab -->
                <div class="tab-content" id="browserTab">
                    <div class="browser-controls">
                        <input type="text" class="url-input" id="urlInput" placeholder="Enter URL or search...">
                        <button class="action-btn" id="goBtn">
                            <i class="fas fa-search"></i> Go
                        </button>
                    </div>
                    
                    <iframe class="browser-frame" id="browserFrame" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-modals" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen></iframe>
                </div>
                
                <!-- YouTube Tab -->
                <div class="tab-content" id="youtubeTab">
                    <div class="youtube-search">
                        <input type="text" class="url-input" id="youtubeSearch" placeholder="Search YouTube...">
                        <button class="action-btn" id="youtubeSearchBtn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="youtube-player">
                        <iframe class="youtube-iframe" id="youtubePlayer" 
                                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen></iframe>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                        <button class="action-btn" id="youtubeUrlBtn">
                            <i class="fas fa-link"></i> Load from URL
                        </button>
                        <button class="action-btn" id="youtubeClearBtn">
                            <i class="fas fa-times"></i> Clear
                        </button>
                    </div>
                </div>
                
                <!-- Games Tab -->
                <div class="tab-content" id="gamesTab">
                    <div class="games-grid">
                        <div class="game-card" data-game="yeti">
                            <i class="fas fa-snowflake game-icon"></i>
                            <div class="game-title">Yeti Sensation</div>
                        </div>
                        <div class="game-card" data-game="penguin">
                            <i class="fas fa-fish game-icon"></i>
                            <div class="game-title">Slinguin</div>
                        </div>
                        <div class="game-card" data-game="saloon">
                            <i class="fas fa-beer game-icon"></i>
                            <div class="game-title">The Saloon</div>
                        </div>
                        <div class="game-card" data-game="pirate">
                            <i class="fas fa-ship game-icon"></i>
                            <div class="game-title">Pirate Ship</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Media Viewer -->
        <div class="media-viewer" id="mediaViewer">
            <div class="viewer-content">
                <img class="viewer-media" id="viewerImage" src="" alt="" style="display: none;">
                <video class="viewer-media" id="viewerVideo" controls style="display: none;"></video>
            </div>
            
            <div class="viewer-controls">
                <button class="viewer-btn" id="downloadMediaBtn">
                    <i class="fas fa-download"></i> Download
                </button>
                <button class="viewer-btn" id="closeViewerBtn">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
        
        <!-- Game Frame -->
        <div class="game-frame" id="gameFrame">
            <div class="game-header">
                <div style="font-weight: 500; color: var(--accent-cyan);" id="gameTitle">Game</div>
                <button class="action-btn" id="closeGameBtn">
                    <i class="fas fa-times"></i> Exit Game
                </button>
            </div>
            <iframe class="game-iframe" id="gameIframe" sandbox="allow-same-origin allow-scripts allow-popups allow-forms" allowfullscreen></iframe>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav" id="bottomNav">
            <div class="nav-item active" data-tab="home">
                <i class="fas fa-home nav-icon"></i>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" data-tab="gallery">
                <i class="fas fa-images nav-icon"></i>
                <div class="nav-label">Gallery</div>
            </div>
            <div class="nav-item" data-tab="video">
                <i class="fas fa-video nav-icon"></i>
                <div class="nav-label">Video</div>
            </div>
            <div class="nav-item" data-tab="browser">
                <i class="fas fa-globe nav-icon"></i>
                <div class="nav-label">Browser</div>
            </div>
            <div class="nav-item" data-tab="youtube">
                <i class="fab fa-youtube nav-icon"></i>
                <div class="nav-label">YouTube</div>
            </div>
            <div class="nav-item" data-tab="games">
                <i class="fas fa-gamepad nav-icon"></i>
                <div class="nav-label">Games</div>
            </div>
        </div>
    </div>

    <script>
        // App State
        const appState = {
            pin: '',
            pinEntered: '',
            isSettingPin: true,
            isUnlocked: false,
            currentScreen: 'pin',
            calculator: {
                currentValue: '0',
                previousValue: null,
                operator: null,
                waitingForNewValue: false
            },
            vault: {
                photos: [],
                videos: [],
                selectedPhoto: null,
                selectedVideo: null,
                currentTab: 'home'
            },
            mediaViewer: {
                isOpen: false,
                currentMedia: null,
                mediaType: null
            }
        };

        // DOM Elements
        const pinScreen = document.getElementById('pinScreen');
        const calculatorScreen = document.getElementById('calculatorScreen');
        const vaultScreen = document.getElementById('vaultScreen');
        const statusBar = document.getElementById('statusBar');
        const bottomNav = document.getElementById('bottomNav');
        const pinDisplay = document.getElementById('pinDisplay');
        const pinInstruction = document.getElementById('pinInstruction');
        const pinEnterBtn = document.getElementById('pinEnterBtn');
        const vaultUnlockBtn = document.getElementById('vaultUnlockBtn');
        
        // Calculator elements
        const calcResult = document.getElementById('calcResult');
        const calcHistory = document.getElementById('calcHistory');
        
        // Vault elements
        const photoGrid = document.getElementById('photoGrid');
        const videoGrid = document.getElementById('videoGrid');
        const photoInput = document.getElementById('photoInput');
        const videoInput = document.getElementById('videoInput');
        const addPhotoBtn = document.getElementById('addPhotoBtn');
        const addVideoBtn = document.getElementById('addVideoBtn');
        const viewPhotoBtn = document.getElementById('viewPhotoBtn');
        const playVideoBtn = document.getElementById('playVideoBtn');
        const deletePhotoBtn = document.getElementById('deletePhotoBtn');
        const deleteVideoBtn = document.getElementById('deleteVideoBtn');
        
        // Browser elements
        const urlInput = document.getElementById('urlInput');
        const goBtn = document.getElementById('goBtn');
        const browserFrame = document.getElementById('browserFrame');
        
        // YouTube elements
        const youtubeSearch = document.getElementById('youtubeSearch');
        const youtubeSearchBtn = document.getElementById('youtubeSearchBtn');
        const youtubePlayer = document.getElementById('youtubePlayer');
        const youtubeUrlBtn = document.getElementById('youtubeUrlBtn');
        const youtubeClearBtn = document.getElementById('youtubeClearBtn');
        
        // Media viewer elements
        const mediaViewer = document.getElementById('mediaViewer');
        const viewerImage = document.getElementById('viewerImage');
        const viewerVideo = document.getElementById('viewerVideo');
        const downloadMediaBtn = document.getElementById('downloadMediaBtn');
        const closeViewerBtn = document.getElementById('closeViewerBtn');
        
        // Game elements
        const gameFrame = document.getElementById('gameFrame');
        const gameIframe = document.getElementById('gameIframe');
        const closeGameBtn = document.getElementById('closeGameBtn');
        const gameTitle = document.getElementById('gameTitle');
        
        // Navigation elements
        const navItems = document.querySelectorAll('.nav-item');
        const tabContents = document.querySelectorAll('.tab-content');
        const vaultTitle = document.getElementById('vaultTitle');
        const photoCount = document.getElementById('photoCount');
        const videoCount = document.getElementById('videoCount');

        // Initialize App
        function initApp() {
            updateTime();
            setInterval(updateTime, 60000);
            
            // Check for existing PIN
            const savedPin = localStorage.getItem('calcVaultPin');
            if (savedPin) {
                appState.isSettingPin = false;
                appState.pin = savedPin;
                showCalculator();
            } else {
                showPinScreen();
            }
            
            // Load saved media
            loadSavedMedia();
            
            // Setup event listeners
            setupEventListeners();
            
            // Initialize calculator
            initCalculator();
        }

        // Show PIN screen
        function showPinScreen() {
            pinScreen.classList.remove('hidden');
            calculatorScreen.classList.add('hidden');
            vaultScreen.classList.remove('active');
            appState.currentScreen = 'pin';
            appState.pinEntered = '';
            updatePinDisplay();
        }

        // Show calculator screen
        function showCalculator() {
            pinScreen.classList.add('hidden');
            calculatorScreen.classList.remove('hidden');
            vaultScreen.classList.remove('active');
            statusBar.classList.remove('visible');
            bottomNav.classList.remove('visible');
            appState.currentScreen = 'calculator';
            appState.calculator.currentValue = '0';
            calcResult.textContent = '0';
            calcHistory.textContent = '';
        }

        // Show vault screen
        function showVault() {
            pinScreen.classList.add('hidden');
            calculatorScreen.classList.add('hidden');
            vaultScreen.classList.add('active');
            statusBar.classList.add('visible');
            bottomNav.classList.add('visible');
            appState.currentScreen = 'vault';
            appState.isUnlocked = true;
            
            // Update media counts
            updateMediaCounts();
            
            // Show home tab by default
            switchTab('home');
        }

        // Update PIN display dots
        function updatePinDisplay() {
            const dots = pinDisplay.querySelectorAll('.pin-dot');
            const pinLength = appState.pinEntered.length;
            
            dots.forEach((dot, index) => {
                if (index < pinLength) {
                    dot.classList.add('filled');
                } else {
                    dot.classList.remove('filled');
                }
            });
            
            // Update instruction text
            if (appState.isSettingPin) {
                pinInstruction.textContent = pinLength === 4 ? 
                    'Press = to confirm PIN' : 
                    'Set your 4-digit vault PIN';
            } else {
                pinInstruction.textContent = pinLength === 4 ? 
                    'Press = to unlock vault' : 
                    'Enter your 4-digit PIN';
            }
        }

        // Update time display
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Setup all event listeners
        function setupEventListeners() {
            // PIN screen buttons
            document.querySelectorAll('.pin-screen .calc-btn').forEach(btn => {
                btn.addEventListener('click', handlePinButton);
            });
            
            // Calculator buttons
            document.querySelectorAll('.calculator-screen .calc-btn').forEach(btn => {
                btn.addEventListener('click', handleCalculatorButton);
            });
            
            // Vault unlock button
            vaultUnlockBtn.addEventListener('click', attemptVaultUnlock);
            
            // Media buttons
            addPhotoBtn.addEventListener('click', () => photoInput.click());
            addVideoBtn.addEventListener('click', () => videoInput.click());
            viewPhotoBtn.addEventListener('click', viewSelectedPhoto);
            playVideoBtn.addEventListener('click', playSelectedVideo);
            deletePhotoBtn.addEventListener('click', deleteSelectedPhoto);
            deleteVideoBtn.addEventListener('click', deleteSelectedVideo);
            
            // File inputs
            photoInput.addEventListener('change', handlePhotoUpload);
            videoInput.addEventListener('change', handleVideoUpload);
            
            // Browser controls
            goBtn.addEventListener('click', navigateBrowser);
            urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') navigateBrowser();
            });
            
            // YouTube controls
            youtubeSearchBtn.addEventListener('click', searchYouTube);
            youtubeUrlBtn.addEventListener('click', loadYouTubeFromUrl);
            youtubeClearBtn.addEventListener('click', () => {
                youtubePlayer.src = 'https://www.youtube.com/embed/dQw4w9WgXcQ';
                youtubeSearch.value = '';
            });
            
            youtubeSearch.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') searchYouTube();
            });
            
            // Media viewer controls
            closeViewerBtn.addEventListener('click', closeMediaViewer);
            downloadMediaBtn.addEventListener('click', downloadCurrentMedia);
            
            // Game controls
            closeGameBtn.addEventListener('click', closeGame);
            document.querySelectorAll('.game-card').forEach(card => {
                card.addEventListener('click', openGame);
            });
            
            // Navigation
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.getAttribute('data-tab');
                    switchTab(tab);
                });
            });
        }

        // Handle PIN screen button clicks
        function handlePinButton(e) {
            const button = e.currentTarget;
            const isNumber = button.classList.contains('num-btn');
            
            if (isNumber && appState.pinEntered.length < 4) {
                const number = button.getAttribute('data-number');
                appState.pinEntered += number;
                updatePinDisplay();
            } else if (button.classList.contains('clear-btn')) {
                appState.pinEntered = '';
                updatePinDisplay();
            } else if (button === pinEnterBtn && appState.pinEntered.length === 4) {
                if (appState.isSettingPin) {
                    // Set new PIN
                    appState.pin = appState.pinEntered;
                    localStorage.setItem('calcVaultPin', appState.pin);
                    showCalculator();
                } else {
                    // Verify PIN for vault unlock
                    if (appState.pinEntered === appState.pin) {
                        showVault();
                    } else {
                        // Wrong PIN - clear and continue
                        appState.pinEntered = '';
                        updatePinDisplay();
                        // Show error feedback
                        pinInstruction.textContent = 'Wrong PIN. Try again.';
                        pinInstruction.style.color = 'var(--danger-red)';
                        setTimeout(() => {
                            pinInstruction.style.color = '';
                            pinInstruction.textContent = 'Enter your 4-digit PIN';
                        }, 1500);
                    }
                }
            }
        }

        // Initialize calculator
        function initCalculator() {
            appState.calculator.currentValue = '0';
            appState.calculator.previousValue = null;
            appState.calculator.operator = null;
            appState.calculator.waitingForNewValue = false;
        }

        // Handle calculator button clicks
        function handleCalculatorButton(e) {
            const button = e.currentTarget;
            const isNumber = button.classList.contains('num-btn');
            const isOperator = button.classList.contains('operator-btn');
            const isEquals = button === vaultUnlockBtn;
            const value = button.textContent;
            
            if (isNumber) {
                inputNumber(value);
            } else if (isOperator) {
                if (value === 'C') {
                    clearCalculator();
                } else if (value === '+/-') {
                    toggleSign();
                } else if (value === '%') {
                    calculatePercentage();
                } else {
                    inputOperator(value);
                }
            } else if (isEquals) {
                // Only attempt vault unlock if PIN was entered via calculator
                // For normal calculator operation, we handle equals separately
                if (appState.calculator.operator && appState.calculator.previousValue !== null) {
                    calculate();
                }
            }
            
            updateCalculatorDisplay();
        }

        // Input number
        function inputNumber(num) {
            const { currentValue, waitingForNewValue } = appState.calculator;
            
            if (waitingForNewValue) {
                appState.calculator.currentValue = num;
                appState.calculator.waitingForNewValue = false;
            } else {
                appState.calculator.currentValue = currentValue === '0' ? num : currentValue + num;
            }
        }

        // Input operator
        function inputOperator(op) {
            const { currentValue, previousValue, operator } = appState.calculator;
            
            if (operator && !appState.calculator.waitingForNewValue) {
                calculate();
            }
            
            appState.calculator.previousValue = currentValue;
            appState.calculator.operator = op;
            appState.calculator.waitingForNewValue = true;
        }

        // Calculate
        function calculate() {
            const { currentValue, previousValue, operator } = appState.calculator;
            
            if (previousValue === null || operator === null) return;
            
            const prev = parseFloat(previousValue);
            const current = parseFloat(currentValue);
            let result;
            
            switch (operator) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '×':
                    result = prev * current;
                    break;
                case '÷':
                    result = prev / current;
                    break;
                default:
                    return;
            }
            
            // Handle floating point precision
            result = Math.round(result * 100000000) / 100000000;
            
            appState.calculator.currentValue = result.toString();
            appState.calculator.previousValue = null;
            appState.calculator.operator = null;
            appState.calculator.waitingForNewValue = true;
            
            // Update history
            calcHistory.textContent = `${previousValue} ${operator} ${currentValue} =`;
        }

        // Clear calculator
        function clearCalculator() {
            initCalculator();
            calcHistory.textContent = '';
        }

        // Toggle sign
        function toggleSign() {
            const current = parseFloat(appState.calculator.currentValue);
            appState.calculator.currentValue = (-current).toString();
        }

        // Calculate percentage
        function calculatePercentage() {
            const current = parseFloat(appState.calculator.currentValue);
            appState.calculator.currentValue = (current / 100).toString();
        }

        // Update calculator display
        function updateCalculatorDisplay() {
            calcResult.textContent = appState.calculator.currentValue;
        }

        // Attempt vault unlock
        function attemptVaultUnlock() {
            // First check if we're doing a calculation
            if (appState.calculator.operator && appState.calculator.previousValue !== null) {
                calculate();
                updateCalculatorDisplay();
                return;
            }
            
            // Check if the current value matches the PIN
            const currentValue = appState.calculator.currentValue.replace('.', '');
            
            if (currentValue.length === 4 && !currentValue.includes('-')) {
                if (currentValue === appState.pin) {
                    // Successful unlock
                    showVault();
                    // Reset calculator
                    initCalculator();
                    updateCalculatorDisplay();
                } else {
                    // Wrong PIN - clear and continue
                    initCalculator();
                    updateCalculatorDisplay();
                    // Show error feedback via display
                    calcResult.textContent = 'ERR';
                    setTimeout(() => {
                        calcResult.textContent = appState.calculator.currentValue;
                    }, 1000);
                }
            } else {
                // Not a PIN attempt, just normal equals operation
                if (appState.calculator.operator && appState.calculator.previousValue !== null) {
                    calculate();
                    updateCalculatorDisplay();
                }
            }
        }

        // Load saved media from localStorage
        function loadSavedMedia() {
            try {
                const savedPhotos = localStorage.getItem('vaultPhotos');
                const savedVideos = localStorage.getItem('vaultVideos');
                
                if (savedPhotos) {
                    appState.vault.photos = JSON.parse(savedPhotos);
                    renderPhotoGrid();
                }
                
                if (savedVideos) {
                    appState.vault.videos = JSON.parse(savedVideos);
                    renderVideoGrid();
                }
            } catch (e) {
                console.error('Error loading saved media:', e);
                appState.vault.photos = [];
                appState.vault.videos = [];
            }
        }

        // Save media to localStorage
        function saveMedia() {
            localStorage.setItem('vaultPhotos', JSON.stringify(appState.vault.photos));
            localStorage.setItem('vaultVideos', JSON.stringify(appState.vault.videos));
            updateMediaCounts();
        }

        // Update media counts display
        function updateMediaCounts() {
            photoCount.textContent = appState.vault.photos.length;
            videoCount.textContent = appState.vault.videos.length;
        }

        // Handle photo upload
        function handlePhotoUpload(e) {
            const files = Array.from(e.target.files);
            
            files.forEach(file => {
                if (!file.type.startsWith('image/')) return;
                
                const reader = new FileReader();
                reader.onload = (event) => {
                    const photo = {
                        id: Date.now() + Math.random(),
                        name: file.name,
                        data: event.target.result,
                        type: file.type,
                        size: file.size,
                        date: new Date().toLocaleDateString()
                    };
                    
                    appState.vault.photos.push(photo);
                    saveMedia();
                    renderPhotoGrid();
                };
                reader.readAsDataURL(file);
            });
            
            // Reset input
            e.target.value = '';
        }

        // Handle video upload
        function handleVideoUpload(e) {
            const files = Array.from(e.target.files);
            
            files.forEach(file => {
                if (!file.type.startsWith('video/')) return;
                
                const reader = new FileReader();
                reader.onload = (event) => {
                    const video = {
                        id: Date.now() + Math.random(),
                        name: file.name,
                        data: event.target.result,
                        type: file.type,
                        size: file.size,
                        date: new Date().toLocaleDateString()
                    };
                    
                    appState.vault.videos.push(video);
                    saveMedia();
                    renderVideoGrid();
                };
                reader.readAsDataURL(file);
            });
            
            // Reset input
            e.target.value = '';
        }

        // Render photo grid
        function renderPhotoGrid() {
            photoGrid.innerHTML = '';
            
            if (appState.vault.photos.length === 0) {
                photoGrid.innerHTML = `
                    <div class="media-item empty-state">
                        <i class="fas fa-images media-icon"></i>
                        <div class="media-overlay">No photos yet</div>
                    </div>
                `;
                return;
            }
            
            appState.vault.photos.forEach(photo => {
                const item = document.createElement('div');
                item.className = 'media-item';
                if (appState.vault.selectedPhoto === photo.id) {
                    item.classList.add('selected');
                }
                
                item.innerHTML = `
                    <img class="media-thumbnail" src="${photo.data}" alt="${photo.name}">
                    <div class="media-overlay">${photo.name}</div>
                `;
                
                item.addEventListener('click', () => selectPhoto(photo.id));
                photoGrid.appendChild(item);
            });
        }

        // Render video grid
        function renderVideoGrid() {
            videoGrid.innerHTML = '';
            
            if (appState.vault.videos.length === 0) {
                videoGrid.innerHTML = `
                    <div class="media-item empty-state">
                        <i class="fas fa-video media-icon"></i>
                        <div class="media-overlay">No videos yet</div>
                    </div>
                `;
                return;
            }
            
            appState.vault.videos.forEach(video => {
                const item = document.createElement('div');
                item.className = 'media-item';
                if (appState.vault.selectedVideo === video.id) {
                    item.classList.add('selected');
                }
                
                item.innerHTML = `
                    <div style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; position: relative;">
                        <i class="fas fa-play" style="font-size: 2rem; color: white; z-index: 2;"></i>
                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1;"></div>
                    </div>
                    <div class="media-overlay">${video.name}</div>
                `;
                
                item.addEventListener('click', () => selectVideo(video.id));
                videoGrid.appendChild(item);
            });
        }

        // Select photo
        function selectPhoto(id) {
            appState.vault.selectedPhoto = id;
            appState.vault.selectedVideo = null;
            renderPhotoGrid();
            renderVideoGrid();
            updateMediaButtons();
        }

        // Select video
        function selectVideo(id) {
            appState.vault.selectedVideo = id;
            appState.vault.selectedPhoto = null;
            renderPhotoGrid();
            renderVideoGrid();
            updateMediaButtons();
        }

        // Update media action buttons state
        function updateMediaButtons() {
            const hasSelectedPhoto = appState.vault.selectedPhoto !== null;
            const hasSelectedVideo = appState.vault.selectedVideo !== null;
            
            viewPhotoBtn.disabled = !hasSelectedPhoto;
            playVideoBtn.disabled = !hasSelectedVideo;
            deletePhotoBtn.disabled = !hasSelectedPhoto;
            deleteVideoBtn.disabled = !hasSelectedVideo;
        }

        // View selected photo
        function viewSelectedPhoto() {
            const photo = appState.vault.photos.find(p => p.id === appState.vault.selectedPhoto);
            if (!photo) return;
            
            appState.mediaViewer.currentMedia = photo;
            appState.mediaViewer.mediaType = 'photo';
            
            viewerImage.src = photo.data;
            viewerImage.style.display = 'block';
            viewerVideo.style.display = 'none';
            
            mediaViewer.classList.add('active');
            appState.mediaViewer.isOpen = true;
        }

        // Play selected video
        function playSelectedVideo() {
            const video = appState.vault.videos.find(v => v.id === appState.vault.selectedVideo);
            if (!video) return;
            
            appState.mediaViewer.currentMedia = video;
            appState.mediaViewer.mediaType = 'video';
            
            viewerVideo.src = video.data;
            viewerVideo.style.display = 'block';
            viewerImage.style.display = 'none';
            
            mediaViewer.classList.add('active');
            appState.mediaViewer.isOpen = true;
            
            // Play video
            setTimeout(() => {
                viewerVideo.play().catch(e => console.log('Autoplay prevented:', e));
            }, 300);
        }

        // Delete selected photo
        function deleteSelectedPhoto() {
            if (!appState.vault.selectedPhoto) return;
            
            if (confirm('Delete this photo?')) {
                appState.vault.photos = appState.vault.photos.filter(p => p.id !== appState.vault.selectedPhoto);
                appState.vault.selectedPhoto = null;
                saveMedia();
                renderPhotoGrid();
                updateMediaButtons();
            }
        }

        // Delete selected video
        function deleteSelectedVideo() {
            if (!appState.vault.selectedVideo) return;
            
            if (confirm('Delete this video?')) {
                appState.vault.videos = appState.vault.videos.filter(v => v.id !== appState.vault.selectedVideo);
                appState.vault.selectedVideo = null;
                saveMedia();
                renderVideoGrid();
                updateMediaButtons();
            }
        }

        // Close media viewer
        function closeMediaViewer() {
            mediaViewer.classList.remove('active');
            appState.mediaViewer.isOpen = false;
            
            if (appState.mediaViewer.mediaType === 'video') {
                viewerVideo.pause();
                viewerVideo.currentTime = 0;
            }
            
            setTimeout(() => {
                viewerImage.src = '';
                viewerVideo.src = '';
                appState.mediaViewer.currentMedia = null;
                appState.mediaViewer.mediaType = null;
            }, 300);
        }

        // Download current media
        function downloadCurrentMedia() {
            const media = appState.mediaViewer.currentMedia;
            if (!media) return;
            
            const link = document.createElement('a');
            link.href = media.data;
            link.download = media.name;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Navigate browser
        function navigateBrowser() {
            let url = urlInput.value.trim();
            
            if (!url) return;
            
            // Add protocol if missing
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                // Check if it's a search query
                if (url.includes(' ') || url.split('.').length < 2) {
                    // Use Google CSE for search
                    url = `https://cse.google.com/cse?cx=11a079372ff6946ed&q=${encodeURIComponent(url)}`;
                } else {
                    url = 'https://' + url;
                }
            }
            
            browserFrame.src = url;
        }

        // Search YouTube
        function searchYouTube() {
            const query = youtubeSearch.value.trim();
            if (!query) return;
            
            // Use YouTube embed with search
            youtubePlayer.src = `https://www.youtube.com/embed?listType=search&list=${encodeURIComponent(query)}`;
        }

        // Load YouTube from URL
        function loadYouTubeFromUrl() {
            const url = prompt('Enter YouTube video URL:');
            if (!url) return;
            
            // Extract video ID from URL
            let videoId = '';
            
            if (url.includes('youtu.be/')) {
                videoId = url.split('youtu.be/')[1]?.split('?')[0];
            } else if (url.includes('youtube.com/watch?v=')) {
                videoId = url.split('v=')[1]?.split('&')[0];
            } else if (url.includes('youtube.com/embed/')) {
                videoId = url.split('embed/')[1]?.split('?')[0];
            }
            
            if (videoId) {
                youtubePlayer.src = `https://www.youtube.com/embed/${videoId}`;
                youtubeSearch.value = '';
            } else {
                alert('Invalid YouTube URL');
            }
        }

        // Open game
        function openGame(e) {
            const gameCard = e.currentTarget;
            const game = gameCard.getAttribute('data-game');
            let gameUrl = '';
            
            switch (game) {
                case 'yeti':
                    gameUrl = 'https://gemioli.com/yetisensation/html5/gemioli/';
                    gameTitle.textContent = 'Yeti Sensation';
                    break;
                case 'penguin':
                    gameUrl = 'https://gemioli.com/slinguin/html5/gemioli/';
                    gameTitle.textContent = 'Slinguin';
                    break;
                case 'saloon':
                    gameUrl = 'https://gemioli.com/thesaloon/html5/gemioli/';
                    gameTitle.textContent = 'The Saloon';
                    break;
                case 'pirate':
                    gameUrl = 'https://gemioli.com/thepirateship/';
                    gameTitle.textContent = 'Pirate Ship';
                    break;
            }
            
            if (gameUrl) {
                gameIframe.src = gameUrl;
                gameFrame.classList.add('active');
            }
        }

        // Close game
        function closeGame() {
            gameFrame.classList.remove('active');
            gameIframe.src = '';
        }

        // Switch tab
        function switchTab(tab) {
            // Update navigation
            navItems.forEach(item => {
                const itemTab = item.getAttribute('data-tab');
                if (itemTab === tab) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Update tab content
            tabContents.forEach(content => {
                const contentId = content.id;
                const contentTab = contentId.replace('Tab', '');
                
                if (contentTab === tab) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            // Update vault title
            const tabTitles = {
                home: 'Private Vault',
                gallery: 'Private Gallery',
                video: 'Private Videos',
                browser: 'Private Browser',
                youtube: 'YouTube Player',
                games: 'Games Library'
            };
            
            vaultTitle.textContent = tabTitles[tab] || 'Private Vault';
            appState.vault.currentTab = tab;
            
            // Special handling for browser tab
            if (tab === 'browser' && !browserFrame.src) {
                browserFrame.src = 'https://cse.google.com/cse?cx=11a079372ff6946ed';
            }
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>